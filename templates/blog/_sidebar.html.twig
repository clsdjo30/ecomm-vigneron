{# Sidebar pour le blog avec catégories et derniers articles #}

{# Categories widget #}
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-wine text-white">
        <h5 class="mb-0"><i class="bi bi-folder"></i> Catégories</h5>
    </div>
    <div class="card-body">
        {% if categories is empty %}
            <p class="text-muted small mb-0">Aucune catégorie</p>
        {% else %}
            <div class="list-group list-group-flush">
                {% for category in categories %}
                    <a href="{{ path('app_blog_category', {slug: category.slug}) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        {{ category.name }}
                        <span class="badge bg-wine rounded-pill">{{ category.posts|length }}</span>
                    </a>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>

{# Recent posts widget (if provided) #}
{% if recentPosts is defined and recentPosts is not empty %}
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-wine text-white">
            <h5 class="mb-0"><i class="bi bi-clock-history"></i> Derniers articles</h5>
        </div>
        <div class="card-body">
            <div class="list-group list-group-flush">
                {% for post in recentPosts %}
                    <a href="{{ path('app_blog_show', {slug: post.slug}) }}" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h6 class="mb-1">{{ post.title }}</h6>
                        </div>
                        <small class="text-muted">{{ post.createdAt|date('d/m/Y') }}</small>
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>
{% endif %}

{# Call to action #}
<div class="card shadow-sm bg-light">
    <div class="card-body text-center">
        <h5 class="card-title">Rejoignez notre newsletter</h5>
        <p class="card-text small">Restez informé de nos actualités et événements</p>
        <a href="{{ path('app_home') }}#newsletter" class="btn btn-wine btn-sm">
            <i class="bi bi-envelope"></i> S'abonner
        </a>
    </div>
</div>
